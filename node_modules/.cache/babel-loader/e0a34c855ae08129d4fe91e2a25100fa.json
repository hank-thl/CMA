{"ast":null,"code":"import store from \"@/store/index\";\nimport $ from \"jquery\";\nimport axios from \"axios\";\nexport default {\n  name: \"MyHeader\",\n\n  data() {\n    return {\n      cart: [],\n      amount: 0,\n      memberId: 0\n    };\n  },\n\n  mounted() {\n    $(\".top-cart-content\").slideUp();\n    axios.get(`http://localhost:8081/api/cart/checkout`).then(res => {\n      this.cart = res.data;\n      this.amount = 0;\n\n      if (this.cart != \"購物車內目前沒有商品!\") {\n        $.each(this.cart, (index, products) => {\n          this.amount += parseInt(products.singleTotal);\n        });\n      }\n    });\n  },\n\n  computed: {\n    getItemAmount() {\n      return store.state.cartAmount;\n    }\n\n  },\n  methods: {\n    dropdown() {\n      $(\".top-cart-content\").slideDown();\n    },\n\n    up() {\n      $(\".top-cart-content\").slideUp();\n    },\n\n    removeItem(id) {\n      axios.get(`http://localhost:8081/api/cart/remove/${id}`).then(res => {\n        if (res.status != 404) {\n          this.memberId = res.data;\n        }\n      }).catch();\n    },\n\n    getMember() {\n      axios.get(\"http://localhost:8081/api/test/session/mid\").then(res => {\n        if (res.status != 404) {\n          this.memberId = res.data;\n        }\n      }).catch();\n    },\n\n    getCart() {\n      axios.get(`http://localhost:8081/api/cart/checkout`).then(res => {\n        this.cart = res.data;\n        this.amount = 0;\n\n        if (this.cart != \"購物車內目前沒有商品!\") {\n          $.each(this.cart, (index, products) => {\n            this.amount += parseInt(products.singleTotal);\n          });\n        }\n      });\n      axios.get(\"http://localhost:8081/api/test/session/mid\").then(res => {\n        if (res.status != 404) {\n          this.memberId = res.data;\n          console.log(this.memberId);\n        }\n      }).catch();\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAiLA,OAAOA,KAAP,MAAkB,eAAlB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe;EACbC,IAAI,EAAE,UADO;;EAEbC,IAAI,GAAG;IACL,OAAO;MACLC,IAAI,EAAE,EADD;MAELC,MAAM,EAAE,CAFH;MAGLC,QAAQ,EAAE;IAHL,CAAP;EAKD,CARY;;EASbC,OAAO,GAAG;IACRP,CAAC,CAAC,mBAAD,CAAD,CAAuBQ,OAAvB;IACAP,KAAK,CAACQ,GAAN,CAAW,yCAAX,EAAqDC,IAArD,CAA2DC,GAAD,IAAS;MACjE,KAAKP,IAAL,GAAYO,GAAG,CAACR,IAAhB;MACA,KAAKE,MAAL,GAAc,CAAd;;MACA,IAAI,KAAKD,IAAL,IAAa,aAAjB,EAAgC;QAC9BJ,CAAC,CAACY,IAAF,CAAO,KAAKR,IAAZ,EAAkB,CAACS,KAAD,EAAQC,QAAR,KAAqB;UACrC,KAAKT,MAAL,IAAeU,QAAQ,CAACD,QAAQ,CAACE,WAAV,CAAvB;QACD,CAFD;MAGF;IACD,CARD;EASD,CApBY;;EAqBbC,QAAQ,EAAE;IACRC,aAAa,GAAG;MACd,OAAOnB,KAAK,CAACoB,KAAN,CAAYC,UAAnB;IACD;;EAHO,CArBG;EA2BbC,OAAO,EAAE;IACPC,QAAQ,GAAG;MACTtB,CAAC,CAAC,mBAAD,CAAD,CAAuBuB,SAAvB;IACD,CAHM;;IAIPC,EAAE,GAAG;MACHxB,CAAC,CAAC,mBAAD,CAAD,CAAuBQ,OAAvB;IACD,CANM;;IAOPiB,UAAU,CAACC,EAAD,EAAK;MACbzB,KAAI,CACDQ,GADH,CACQ,yCAAwCiB,EAAG,EADnD,EAEGhB,IAFH,CAESC,GAAD,IAAS;QACb,IAAIA,GAAG,CAACgB,MAAJ,IAAc,GAAlB,EAAuB;UACrB,KAAKrB,QAAL,GAAgBK,GAAG,CAACR,IAApB;QACF;MACD,CANH,EAOGyB,KAPH;IAQD,CAhBM;;IAiBPC,SAAS,GAAG;MACV5B,KAAI,CACDQ,GADH,CACO,4CADP,EAEGC,IAFH,CAESC,GAAD,IAAS;QACb,IAAIA,GAAG,CAACgB,MAAJ,IAAc,GAAlB,EAAuB;UACrB,KAAKrB,QAAL,GAAgBK,GAAG,CAACR,IAApB;QACF;MACD,CANH,EAOGyB,KAPH;IAQD,CA1BM;;IA2BPE,OAAO,GAAG;MACR7B,KAAK,CAACQ,GAAN,CAAW,yCAAX,EAAqDC,IAArD,CAA2DC,GAAD,IAAS;QACjE,KAAKP,IAAL,GAAYO,GAAG,CAACR,IAAhB;QACA,KAAKE,MAAL,GAAc,CAAd;;QACA,IAAI,KAAKD,IAAL,IAAa,aAAjB,EAAgC;UAC9BJ,CAAC,CAACY,IAAF,CAAO,KAAKR,IAAZ,EAAkB,CAACS,KAAD,EAAQC,QAAR,KAAqB;YACrC,KAAKT,MAAL,IAAeU,QAAQ,CAACD,QAAQ,CAACE,WAAV,CAAvB;UACD,CAFD;QAGF;MACD,CARD;MAUAf,KAAI,CACDQ,GADH,CACO,4CADP,EAEGC,IAFH,CAESC,GAAD,IAAS;QACb,IAAIA,GAAG,CAACgB,MAAJ,IAAc,GAAlB,EAAuB;UACrB,KAAKrB,QAAL,GAAgBK,GAAG,CAACR,IAApB;UACA4B,OAAO,CAACC,GAAR,CAAY,KAAK1B,QAAjB;QACF;MACD,CAPH,EAQGsB,KARH;IASD;;EA/CM;AA3BI,CAAf","names":["store","$","axios","name","data","cart","amount","memberId","mounted","slideUp","get","then","res","each","index","products","parseInt","singleTotal","computed","getItemAmount","state","cartAmount","methods","dropdown","slideDown","up","removeItem","id","status","catch","getMember","getCart","console","log"],"sourceRoot":"","sources":["/Users/hank/Desktop/Vue/Vue3/hello-world/src/components/MyHeader.vue"],"sourcesContent":["<template>\n  <header>\n    <div class=\"header-container\">\n      <div class=\"container\">\n        <div class=\"row\">\n          <!-- Search-col -->\n          <div class=\"col-lg-4 col-xs-12 col-sm-4 search-section hidden-xs\">\n            <div class=\"search-box pull-left\">\n              <form\n                action=\"cat\"\n                method=\"POST\"\n                id=\"search_mini_form\"\n                name=\"Categories\"\n              >\n                <input\n                  type=\"text\"\n                  name=\"search\"\n                  value=\"\"\n                  placeholder=\"Search\"\n                  class=\"searchbox\"\n                  id=\"search\"\n                  autocomplete=\"off\"\n                /><button type=\"button\" class=\"search-btn-bg\">\n                  <span class=\"glyphicon glyphicon-search\"></span>&nbsp;\n                </button>\n              </form>\n            </div>\n          </div>\n          <!-- End Search-col -->\n          <div class=\"col-lg-4 col-sm-4 col-xs-12 logo-block\">\n            <!-- Header Logo -->\n            <div class=\"logo\">\n              <a href=\"index.html\">\n                <router-link\n                  :to=\"{\n                    name: 'home',\n                  }\"\n                >\n                  <img src=\"../assets/images/5.png\" alt=\"Kabrio logo\" />\n                </router-link>\n              </a>\n            </div>\n            <!-- End Header Logo -->\n          </div>\n          <div class=\"col-lg-4 col-sm-4 col-xs-12 toplinks-right\">\n            <!-- <div class=\"mm-toggle-wrap\">\n              <div class=\"mm-toggle\">\n                <i class=\"fa fa-align-justify\"></i\n                ><span class=\"mm-label\">Menu</span>\n              </div>\n            </div> -->\n\n            <div class=\"top-cart-contain\" @click.stop=\"dropdown(), getCart()\">\n              <!-- Top Cart -->\n              <div class=\"mini-cart\">\n                <div class=\"basket\">\n                  <a\n                    ><span>{{ getItemAmount }}</span></a\n                  >\n                </div>\n                <div>\n                  <div class=\"top-cart-content\" @mouseleave.stop=\"up()\">\n                    <div class=\"block-subtitle\">\n                      <div class=\"top-subtotal\">\n                        {{\n                          cart == \"購物車內目前沒有商品!\" ? \"0\" : cart.length\n                        }}\n                        items,\n\n                        <span class=\"price\">${{ amount }}</span>\n                      </div>\n                    </div>\n                    <ul\n                      v-if=\"cart != '購物車內目前沒有商品!'\"\n                      class=\"mini-products-list\"\n                      id=\"cart-sidebar\"\n                    >\n                      <li v-for=\"item in cart\" :key=\"item\" class=\"item\">\n                        <div class=\"item-inner\">\n                          <a\n                            class=\"product-image\"\n                            title=\"Lorem ipsum dolor\"\n                            href=\"#l\"\n                            ><img\n                              alt=\"Lorem ipsum dolor\"\n                              :src=\"item.productImg\"\n                          /></a>\n                          <div class=\"product-details\">\n                            <div class=\"access\">\n                              <a\n                                class=\"btn-remove1\"\n                                title=\"Remove This Item\"\n                                :href=\"\n                                  \n                                \"\n                                >Remove</a\n                              ><a class=\"btn-edit\" title=\"Edit item\" href=\"#\"\n                                ><i class=\"icon-pencil\"></i\n                                ><span class=\"hidden\">Edit item</span></a\n                              >\n                            </div>\n                            <p class=\"product-name\">\n                              <a href=\"#\">{{ item.productName }}</a>\n                            </p>\n                            <strong>{{ item.qty }}</strong\n                            >x\n                            <span class=\"price\">{{ item.singleTotal }}</span>\n                          </div>\n                        </div>\n                      </li>\n                    </ul>\n                    <div class=\"actions\">\n                      <router-link\n                        :to=\"{\n                          name: memberId > 0 ? 'checkout' : 'login',\n                        }\"\n                      >\n                        <button\n                          class=\"btn-checkout\"\n                          title=\"Checkout\"\n                          type=\"button\"\n                        >\n                          <span>結帳</span>\n                        </button>\n                      </router-link>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <!-- End Top Cart -->\n            </div>\n            <!-- Header Top Links -->\n            <div class=\"toplinks\" @mouseenter=\"getMember()\">\n              <div class=\"click-nav\">\n                <div class=\"no-js\">\n                  <a title=\"Company\" class=\"clicker\"\n                    ><span class=\"icon-account\"\n                      ><img\n                        src=\"../assets/images/icon-account.jpg\"\n                        alt=\"icon-account\" /></span\n                  ></a>\n                  <div class=\"top-links\">\n                    <ul class=\"links\">\n                      <li>\n                        <router-link\n                          :to=\"{\n                            name: 'login',\n                          }\"\n                        >\n                          {{ memberId > 0 ? \" 登出\" : \" 登入\" }}\n                        </router-link>\n                      </li>\n                      <li>\n                        <router-link\n                          :to=\"{\n                            name: memberId > 0 ? 'dashboard' : 'login',\n                          }\"\n                        >\n                          訂單總覽\n                        </router-link>\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <!-- End Header Top Links -->\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- <template v-for=\"item in cart\" :key=\"item.id\"> -->\n    <!-- </template> -->\n  </header>\n</template>\n\n<script>\nimport store from \"@/store/index\";\nimport $ from \"jquery\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"MyHeader\",\n  data() {\n    return {\n      cart: [],\n      amount: 0,\n      memberId: 0,\n    };\n  },\n  mounted() {\n    $(\".top-cart-content\").slideUp();\n    axios.get(`http://localhost:8081/api/cart/checkout`).then((res) => {\n      this.cart = res.data;\n      this.amount = 0;\n      if (this.cart != \"購物車內目前沒有商品!\") {\n        $.each(this.cart, (index, products) => {\n          this.amount += parseInt(products.singleTotal);\n        });\n      }\n    });\n  },\n  computed: {\n    getItemAmount() {\n      return store.state.cartAmount;\n    },\n  },\n\n  methods: {\n    dropdown() {\n      $(\".top-cart-content\").slideDown();\n    },\n    up() {\n      $(\".top-cart-content\").slideUp();\n    },\n    removeItem(id) {\n      axios\n        .get(`http://localhost:8081/api/cart/remove/${id}`)\n        .then((res) => {\n          if (res.status != 404) {\n            this.memberId = res.data;\n          }\n        })\n        .catch();\n    },\n    getMember() {\n      axios\n        .get(\"http://localhost:8081/api/test/session/mid\")\n        .then((res) => {\n          if (res.status != 404) {\n            this.memberId = res.data;\n          }\n        })\n        .catch();\n    },\n    getCart() {\n      axios.get(`http://localhost:8081/api/cart/checkout`).then((res) => {\n        this.cart = res.data;\n        this.amount = 0;\n        if (this.cart != \"購物車內目前沒有商品!\") {\n          $.each(this.cart, (index, products) => {\n            this.amount += parseInt(products.singleTotal);\n          });\n        }\n      });\n\n      axios\n        .get(\"http://localhost:8081/api/test/session/mid\")\n        .then((res) => {\n          if (res.status != 404) {\n            this.memberId = res.data;\n            console.log(this.memberId);\n          }\n        })\n        .catch();\n    },\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.cart {\n  width: 300px !important;\n  padding: 0 !important;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}